<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-title>
      {{'SETTINGS.title' | translate}}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense" class="ion-no-border">
    <ion-toolbar>
        <ion-title size="large">{{'SETTINGS.title' | translate}}</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Profile Section -->
  <ion-card class="profile-card">
    <ion-card-content>
      <div class="profile-header">
        <ion-avatar class="user-avatar">
          <div class="avatar-content" *ngIf="user">
            {{ user.fullName | slice:0:1  }}
          </div>
          <div class="avatar-content" *ngIf="!user?.fullName">
            U
          </div>
        </ion-avatar>
        <div class="profile-info">
          <h2>{{user?.fullName || 'User'}}</h2>
          <p>{{user?.email || 'No email provided'}}</p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Settings List -->
  <ion-list class="settings-list">
    <!-- Edit Profile -->
    <ion-item class="settings-item" (click)="editProfile()">
      <ion-icon name="person-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Edit' | translate}}</ion-label>
      <ion-icon name="chevron-forward" slot="end"></ion-icon>
    </ion-item>

    <!-- Gifts -->
    <ion-item class="settings-item" (click)="openGifts()">
      <ion-icon name="gift-outline" slot="start" color="secondary"></ion-icon>
      <ion-label>{{'SETTINGS.items.Gifts' | translate}}</ion-label>
      <ion-icon name="chevron-forward" slot="end"></ion-icon>
    </ion-item>

    <!-- Notifications -->
    <ion-item class="settings-item">
      <ion-icon name="notifications-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Notifications' | translate}}</ion-label>
      <ion-toggle slot="end" [(ngModel)]="notificationsEnabled" (ionChange)="toggleNotifications()"></ion-toggle>
    </ion-item>

    <!-- Language -->
    <ion-item class="settings-item">
      <ion-icon name="language-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Language' | translate}}</ion-label>
      <ion-select slot="end" [(ngModel)]="selectedLanguage" (ionChange)="changeLanguage($event.detail.value)">
        <ion-select-option *ngFor="let lang of languages" [value]="lang.code">
          {{ lang.flag }} {{ lang.name }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Address -->
    <ion-item class="settings-item" (click)="manageAddress()">
      <ion-icon name="location-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Address' | translate}}</ion-label>
      <ion-icon name="chevron-forward" slot="end"></ion-icon>
    </ion-item>

    <!-- Support -->
    <ion-item class="settings-item" (click)="openSupport()">
      <ion-icon name="help-circle-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Support' | translate}}</ion-label>
      <ion-badge *ngIf="activeSupportCount > 0" color="primary" slot="end">{{ activeSupportCount }}</ion-badge>
      <ion-icon name="chevron-forward" slot="end"></ion-icon>
    </ion-item>

    <!-- FAQ -->
    <ion-item class="settings-item" (click)="openFAQ()">
      <ion-icon name="information-circle-outline" slot="start"></ion-icon>
      <ion-label>{{'SETTINGS.items.Faq' | translate}}</ion-label>
      <ion-icon name="chevron-forward" slot="end"></ion-icon>
    </ion-item>

    <!-- Logout -->
    <ion-item lines="none" class="settings-item logout-item" (click)="logout()">
      <ion-icon name="log-out-outline" slot="start" color="danger"></ion-icon>
      <ion-label color="danger">{{ 'SETTINGS.items.Logout' | translate }}</ion-label>
    </ion-item>
  </ion-list>
</ion-content>
