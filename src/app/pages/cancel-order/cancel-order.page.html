<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-title>Cancel Cab</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/cab-searching" text=""></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="cancel-content">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Cancel Ride</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="cancel-container">
    <div class="header-section">
      <h2>Why are you cancelling?</h2>
      <p>Please help us improve by selecting a reason</p>
    </div>

    <ion-list class="reasons-list">
      <ion-item 
        lines="none" 
        class="reason-item"
        *ngFor="let reason of cancellationReasons"
        (click)="selectReason(reason)">
        <ion-checkbox 
          slot="start"
          [checked]="selectedReason === reason"
          color="primary">
        </ion-checkbox>
        <ion-label class="reason-label">{{ reason }}</ion-label>
      </ion-item>
    </ion-list>

    <div class="custom-reason-section" *ngIf="selectedReason === 'Other'">
      <ion-item lines="none" class="custom-reason-item">
        <ion-label position="stacked" class="custom-label">
          Please specify your reason
        </ion-label>
        <ion-textarea 
          rows="4" 
          placeholder="Tell us why you're cancelling..." 
          class="textarea-custom"
          [(ngModel)]="customReason"
          (ionFocus)="onTextareaFocus()"
          (ionBlur)="onTextareaBlur()">
        </ion-textarea>
      </ion-item>
    </div>

    <div class="button-section">
      <ion-button 
        expand="block" 
        color="primary" 
        class="submit-button"
        (click)="submit()"
        [disabled]="!selectedReason || (selectedReason === 'Other' && !customReason.trim())">
        Cancel Ride
      </ion-button>
    </div>
  </div>
  
  <!-- Cancellation Alert -->
  <div class="cancellation-alert" *ngIf="showAlert" [class.show]="showAlert">
    <div class="alert-content">
      <div class="emoji">ðŸ˜¢</div>
      <h2>We're so sad about your cancellation</h2>
      <p>We will continue to improve our service and satisfy you on the next trip</p>
      <ion-button expand="block" class="okay-btn" (click)="closeAlert()">
        Okay!
      </ion-button>
    </div>
  </div>
</ion-content>
