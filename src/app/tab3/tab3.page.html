  <ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-title>
      {{ 'WALLET.title' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense" class="ion-no-border">
    <ion-toolbar>
      <ion-title size="large">{{ 'WALLET.title' | translate }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Loading State -->
  <div *ngIf="isLoading && !isRefreshing" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>{{ 'WALLET.loadingWalletData' | translate }}</p>
  </div>

  <!-- Balance Card -->
  <ion-card class="balance-card" *ngIf="!isLoading || isRefreshing">
    <ion-card-content>
      <div class="balance-container">
        <h2 class="balance-label">{{ 'WALLET.availableBalance' | translate }}</h2>
        <h1 class="balance-amount">₹{{ (balance || 0).toFixed(2) }}</h1>
        <div class="action-buttons">
          <ion-button expand="block" fill="solid" (click)="addMoney()" [disabled]="isLoading">
            <ion-icon name="add-circle-outline" slot="start"></ion-icon>
            {{ 'WALLET.addMoney' | translate }}
          </ion-button>
          <ion-button expand="block" fill="outline" (click)="useMoney()" [disabled]="isLoading">
            <ion-icon name="wallet-outline" slot="start"></ion-icon>
            {{ 'WALLET.useMoney' | translate }}
          </ion-button>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Recent Transactions -->
  <div class="transactions-section" *ngIf="!isLoading || isRefreshing">
    <h2 class="section-title">{{ 'WALLET.recentTransactions' | translate }}</h2>
    
    <!-- Empty State -->
    <div *ngIf="transactions.length === 0" class="empty-state">
      <ion-icon name="receipt-outline" size="large" color="medium"></ion-icon>
      <p>{{ 'WALLET.noTransactions' | translate }}</p>
      <p class="empty-subtitle">{{ 'WALLET.noTransactions' | translate }}</p>
    </div>

    <!-- Transactions List -->
    <ion-list *ngIf="transactions.length > 0">
      <ion-item *ngFor="let transaction of transactions" class="transaction-item">
        <ion-icon 
          [name]="isCreditTransaction(transaction.transactionType) ? 'arrow-down-circle' : 'arrow-up-circle'"
          [color]="isCreditTransaction(transaction.transactionType) ? 'success' : 'danger'"
          slot="start">
        </ion-icon>
        <ion-label>
          <h3>{{ getTransactionTypeDisplay(transaction.transactionType) }}</h3>
          <p>{{ transaction.description || getTransactionTypeDisplay(transaction.transactionType) }}</p>
          <p class="transaction-date">{{ transaction.createdAt | date:'medium' }}</p>
        </ion-label>
        <div slot="end" class="transaction-amounts">
          <ion-note [color]="isCreditTransaction(transaction.transactionType) ? 'success' : 'danger'" class="amount">
            {{ isCreditTransaction(transaction.transactionType) ? '+' : '-' }}₹{{ transaction.amount.toFixed(2) }}
          </ion-note>
          <ion-badge [color]="getStatusColor(transaction.status)" class="status-badge">
            {{ transaction.status }}
          </ion-badge>
        </div>
      </ion-item>
    </ion-list>

    <!-- View All Button -->
    <div *ngIf="transactions.length > 0" class="ion-text-center ion-padding-top">
      <ion-button 
        expand="block" 
        fill="outline" 
        (click)="viewAllTransactions()"
        [disabled]="isLoading">
        <ion-icon name="list-outline" slot="start"></ion-icon>
        {{ 'WALLET.viewAll' | translate }}
      </ion-button>
    </div>
  </div>
</ion-content>
